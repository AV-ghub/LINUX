> Эви Немет, Iр Снайер, 'ент ХеАн, Бен Уэйли, Дэн Маки
> Unix и Linu: руоводство системного адинистратра
> 5-е издание
## СТАНДАРТНОЕ УПРАВЛЕНИЕ ДОСТУПОМ в UNIX
### Контроль доступа к файловой системе
В стандартной модели кажый файл имеет как ваельца, так и группу, иногда называемую " групповым влаельцем " . Владелец может устанавивать разрешения дя файла.  
Влаелец файла определяет, что могут сделать с н им члены групп. Эта схема позволяет делиться файлами межу членами одного и того же проекта.  
Влаельца файла можно определить с помощью команды ls -1:
```
$ ls -1 ~qarth/ todo
- rw- r - - - - - 1 g a r t h s t a f f 1 2 5 9 Мау 2 9 1 9 : 5 5 / U s e r s / g a r t h / todo
```
Данный файл принадежит пользователю garth и группе staff.   
В подавляющем большинстве случаев идентификационные ***номера пользователей*** (короткие идентификаторы UID) сопоставяются с именами пользователей в файле **/etc/passwd**, а идентификационные ***номера групп*** ( GID) сопотавляются с именами групп в файле **/etc/group**.  

### Учетная запись суперпользователя root
Определяющей характеристи кой учетной записи root я вляется е е иде нтифи катор UID , равный О.  
Процесс , котор ый запрашивает ваш парол ь при входе в систему, изначаьно запускается с правами пользователя root. Если введенный вами пароль и имя пользователя явяются законными, то программа входа в с истему login изменяет свои UID и GID на ваш и UID и GID и запускает среду оболочки или графический пол ьзовател ьский и нтерфейс.  

Когда ядро запускает испол н я е м ы й файл с установлен н ы м и бита м и разреш е н и я s e t u i d или s e t g i d , о н о изменяет текущий идентификатор U I D или G I D результирующего процесса на U I D или G I D файла, содержащего образ программ ы , а не на U I D и G I D пользователя , который ввел команду. Таким образом, привиегии пол ьзователя распространяются только на выполнение этой конкретной команды.  

Учетные записи root не содержат инфрмации о том , какие операции выпол нялись с правами root.  
Сценарий входа в систему не содержит записей о том , кто на самом деле выполняет данную работ Если у несколькх польвателей есть дост к учетной зписи root, вы не сможете определить, кт ее испольова и когда.  

Лучше получать доступ к учетной записи root с помощью команды **su**. При вызове без аргументов она выдает приглашение на ввод пароля пользователя root, а затем запускает оболочку с привилегированными правами. Эти права будут сохраняться , пока вы не завершите работу (нажав комбинацию кавиш **<Ctrl+D>** или выполнив команду **exit**). 

Команда su не фиксирует действия, производимые привилегированным пользователем, но добавляет запись в журнальный файл с указанием , кто и когда вошел в систему под именем root.  
Команда su способна также подставлять вместо имени root имена других пол ьзователей. 

Зная чей-либо пароль, можно непосредственно зарегистрироваться в системе под его именем, введя команду  ***su - имя_пользователя***.
При использовани и в качестве кюча команды su дефиса **(-)** оболочка перейдет в **режим регистрации**.  
Точная реализация этого режима зависит от конкретной оболочки , но обычно в этом режиме меняются количество и имена файлов запуска, считываемых интерпретатором.
Например, в режиме регистрации оболочка bash считывет файл ***~/ . bashyrofile***, а вне эог режима - файл ***~/ . bashrc***. При диагнотике пролем конкретног поьвателя режм регистрации позволяет максимаьно точно вспризвести среду в которой он работал.

В некоторых системах, чтобы использовать команду su, необходимо быть членом гуппы wheel.  

### Программа sudo: ограниченный вариант команды su
Эта программа доступна в форме исходного кода на сайте sudo.ws.  
Программа sudo прверяет файл **/etc/sudoers**.  
> В течение пяти мину поле запука программа sudo позволяет выполнять команды без обязательного введения пароля

Регистрацию команд в программе sudo можно легко обойти с помощью таких трюков, как временный выход в оболочку из разрешенной программ ы , или команды **sudo sh** и **sudo su**. (Такие команды отображаются в журнаах, поэтому вы по крайней мере узнаете, что они бьuш запущены.)  

Программа sudo настраивается на выполнение команды с правами root без необходимости вводить пароль. Для справки, эта конфигурация задается с помощью к ючевого слова NOPAS SWD в файе sudoers. Например:
```
ansible ALL = ( ALL ) NOPASSWD : ALL
```

Правило закл ючается в том , что sudo все гда подчиняется последней соответствующей строке , причем совпаде ние определяется все ми четырьмя параметрам и : и менем пользователя , хостом, и менем целевого пол ьзователя и командой.   

В системе Linux, команда **passwd -l** блокирует учетную запись, добавляя знак ! к зашифрованному паролю.   
Система Ubuntu поставляется с откл юченной уетной записью root, и весь административный доступ осуществляется через программу sudo или ее эквивалент с графическим пользовательским интерейсом. Еслихотите, можете ***установить пароль root на Ubuntu***, а затем ***разблокировать учетную запись*** с помощью команды 
```
sudo passwd -u root
```

### Системные учетные записи, отличные от root
Вы можете идентифицировать эти фиктивные учетн ые записи по их идентификаторам UID, которые обычно не превышают 100. Чаще всего идентификаторы UID менее 10 относятся к системным учетным записям , а UID от 10 до 100 - к псевопользователям , связнным с определенными ком понентам и программ ного обеспечения.  





































